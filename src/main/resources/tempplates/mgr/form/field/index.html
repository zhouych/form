<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>表单字段</title>
<link type="text/css" rel="stylesheet" th:href="@{/bs-3.3.7/css/bootstrap.min.css}" ></link>
<link type="text/css" rel="stylesheet" th:href="@{/bs-3.3.7/css/bootstrap-theme.min.css}" ></link>
<link type="text/css" rel="stylesheet" th:href="@{/bs-plugins/table/bootstrap-table.css}" ></link>
<link type="text/css" rel="stylesheet" th:href="@{/zyc/css/zyc.css}" ></link>
</head>
<body>
	<div th:replace="/fragments/layout::header('login') " />
	<div class="container-fluid">
		<div id="toolbar-fields">
			<button type="button" id="btn_refresh_fields" class="btn btn-default">刷新</button>
		</div>
		<table id="table-fields"></table>
	</div>
	<div th:replace="/fragments/layout::footer" />
</body>
<script type="text/javascript" th:src="@{/jquery/jquery-1.12.1.js}" ></script>
<script type="text/javascript" th:src="@{/bs-3.3.7/js/bootstrap.js}" ></script>
<script type="text/javascript" th:src="@{/bs-plugins/table/bootstrap-table.js}" ></script>
<script type="text/javascript" th:src="@{/bs-plugins/table/locale/bootstrap-table-zh-CN.js}" ></script>
<script type="text/javascript" th:src="@{/zyc/js/zyc.js}" ></script>
<script type="text/javascript" th:src="@{/zyc/js/zyc-form.js}" ></script>
<script type="text/javascript" th:src="@{/zyc/js/zyc-bs-table.js}" ></script>
<script th:inline="javascript" type="text/javascript">
	$(document).ready(function() {
		var formid = [[${formid}]];
		//事件列表
		var events = {
			'btn_refresh_fields': function(e) {
				alert('s');
			}
		};
		
		$('#toolbar-fields .btn').off('click').on('click', function(e) {
			var $this = $(this);
			if(!$this.attr('disabled')) {
				var ename = $this.attr('id');
				if($this.hasClass('limit-operate')) {
					var formfieldid = $this.data('formfieldid');
					if(!formfieldid) {
						alert('请选择需要' + $this.text() + '的字段！');	
					} else {
						events[ename].apply(this, [ e, formfieldid ]);
					}
				} else {
					events[ename].apply(this, [ e ]);
				}
			}
		});
		
		$('.btn.limit-operate').attr('disabled', true);
		
		/* var $table;
		
		bstable.init($table = $('#table-forms'), {
			toolbar: '#toolbar-forms',
			url: '/mgr/form/field/fields',
			method: 'post',
			columns: [
            	{ checkbox: true, visible: true } 
            	, { field: 'id', title: 'id', sortable: true, visible: false }
            	, { field: 'formdomainid', title: '表单域ID', visible: false }
            	, { field: 'formdomainname', title: '表单域', sortable: true, halign: 'center', align: 'left', formatter: formatDomain, cellStyle: bstable.cellDisableRowTooltip }
            	, { field: 'formcode', title: '编码', sortable: true, halign: 'center', align: 'left' }
            	, { field: 'formname', title: '名称', sortable: true, halign: 'center', align: 'left' }
            	, { field: 'formtype', title: 'formtype', sortable: false, visible: false }
            	, { field: 'formtypename', title: '表单类型', sortable: false, halign: 'center', align: 'center' }
            	, { field: 'datastatus', title: '状态', sortable: true, halign: 'center', align: 'center', formatter: zyc.textDataStatus }
            	, { field: 'createdat', title: '创建日期', sortable: true, halign: 'center', align: 'right', formatter: zyc.formatTimestamp }
            	, { field: 'updatedat', title: '更新日期', sortable: true, halign: 'center', align: 'right', formatter: zyc.formatTimestamp }
            	, { field: 'version', title: '版本号', sortable: true, halign: 'center', align: 'right' }
            ],
            sortName: 'formdomainid',
            rowTooltipable: true,
            rowTooltipTitle: '单击选中当前行，双击进入详情页。',
            onLoadSuccess: function(data) {
        		$table.find('tbody input[type="checkbox"][name="btSelectItem"]').off('change').on('change', function(e) {
        			var checked = $(this).is(':checked'),
        				value = $(this).val();
    				$('.btn.limit-operate').data('formid', checked ? value : null).attr('disabled', !checked);
        		});
            },
			onClickRow: function (item, $element) {
	            return false;
	        },
			onDblClickRow: function (item, $element) {
				$('#btn_edit_form').data('formid', item.id).attr('disabled', false).trigger("click");
	            return false;
	        }
		}, function(params) {
			var sort = params.sort === 'formdomainname' ? 'formdomainid' : params.sort; 
			return {
	    		pagination: {
		    		order: sort
	    		},
				condition: {},
				searchText: params.search
			};
		}); */
	});
</script>
</html>